---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

const posts = await getCollection("projects");
const renderedPosts = await Promise.all(
	posts.map(async (post) => {
		const { Content } = await post.render();
		return { post, Content };
	}),
);
---

<Layout title="" description="Test">
	<main>
		{
			renderedPosts.map(({ post, Content }) => (
				<ul class="flex flex-col gap-1.5">
					<li class="mb-2">
						<a
							href={`/projects/${post.slug}`}
							class="group flex justify-between gap-3"
						>
							<div class="flex flex-col">
								<div class="flex items-center gap-2">
									<span class="font-medium group-hover:underline">
										<h2>{post.data.title}</h2>
									</span>
								</div>

								<span class="mt-1 text-sm">{post.data.description}</span>
							</div>
						</a>
					</li>
				</ul>
			))
		}
	</main>
</Layout>
